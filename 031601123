#include<stdio.h>
#include<iostream>
#include<stdlib.h>
#include<cmath>
#include<vector>
#include<cstring>
#include<stack>
#include<set>
#include<string.h>
#include<ctime>
using namespace std;

#define MAXN 15000//宏定义
FILE *fp1,*fp2; 
struct word{
	char letter[100];
	int num; 
	int id;
};


struct compare{
	
	bool operator()(const word& e1, const word& e2)const{
	if( e1.letter[0]*27*27*27*27*27*27+e1.letter[1]*27*27*27*27*27+e1.letter[2]*27*27*27*27+e1.letter[3]*27*27*27+e1.letter[4]*27*27+e1.letter[5]<=e2.letter[0]*27*27*27*27*27*27+e2.letter[1]*27*27*27*27*27+e2.letter[2]*27*27*27*27+e2.letter[3]*27*27*27+e2.letter[4]*27*27+e2.letter[5]) 
     return true;
    return false;
	}
	
};

struct comparenum{
	
		bool operator()(const word& e1, const word& e2)const{
	if(e1.num*100000000000000000+e2.letter[0]*27*27*27*27*27*27+e2.letter[1]*27*27*27*27*27+e2.letter[2]*27*27*27*27+e2.letter[3]*27*27*27+e2.letter[4]*27*27+e2.letter[5]>=e2.num*100000000000000000+ e1.letter[0]*27*27*27*27*27*27+e1.letter[1]*27*27*27*27*27+e1.letter[2]*27*27*27*27+e1.letter[3]*27*27*27+e1.letter[4]*27*27+e1.letter[5]) 
     return true;
    return false;
	}
	
};
set<word,compare>wordin;
set<word,comparenum>wordnum;
int idnum[10];


int get_lines()
{

fp2 = fopen("WordCount.txt","r+");
	char c,ch='0';
	 int lines=0;
	while((c = fgetc(fp2)) != EOF)
	{
		if(c == '\n' && ch != '\n')
		lines++;
		ch = c;
	} 
	if(ch != '\n')
	lines++;
return lines;

}





int characters_get()
{
	/*fp1=fopen("WordCount.txt","r+");
	
	char str[100];
	while(!feof(fp1))
	{
	fscanf(fp1,"%s",str);
	characters+=strlen(str);
	}*/
	int characters=0;
	fp1 = fopen("WordCount.txt","r+");
	char c;
	while((c = fgetc(fp1)) != EOF)
	{
		if(c >= 0 && c <= 127)
		characters++;
	} 

	return characters;
	
}




int  words_count()
{
	
	
	fp1=fopen("WordCount.txt","r+");
	int characters=0,words=0,lines=0,count=0,num,flag,repeatnum,idi=0;
	    char str[100];
	    int coui,couj,couz;

     	while(!feof(fp1))
	{
		str[0]='0';
		 fscanf(fp1,"%s",str);
		 if(str=="\0") break;
		flag=0;
	characters+=strlen(str);
	
	for(int i=0;i<strlen(str)-1;i++)
	{
		if(str[i]>=65 && str[i]<=90)
		    {
		    	 str[i]+=32;
			}
	}
	
	if(str[0]>=97 && str[0]<=122 && str[1]>=97 && str[1]<=122 && str[2]>=97 && str[2]<=122 && str[3]>=97 && str[3]<=122)
     {       words++;
     			 word i_word;
     	
     	i_word.id =idi;
     	
     	char str1[100];
     	
     	  for( coui=0,couj=0;(str[coui]>=97 && str[coui]<=122 ) || (str[coui]>=48 && str[coui]<=57 );coui++)  
  {    
    
      str1[couj]=str[coui];  
      couj++;  
  
  }  		
   str1[couj]='\0';
   
   /////////////////////////////	
     	strncpy(i_word.letter,str1,sizeof(str1));
     	

	
     	idi++;	 
	 
   string s,s1;
   s=str;
   s=s.substr(coui);

   
   
 while(s.length() >=4)
   {
   	  int coui,couj; 
     string str2=s;
	 if(str2[0]>=97 && str2[0]<=122 && str2[1]>=97 && str2[1]<=122 && str2[2]>=97 && str2[2]<=122 && str2[3]>=97 && str2[3]<=122)   
   	{
   		words++;
   			 word i_word;
     	
     	i_word.id =idi;
     	
     	char str1[100];
     	  for( coui=0,couj=0;(str2[coui]>=97 && str2[coui]<=122 ) || (str2[coui]>=48 && str2[coui]<=57 );coui++)  
  {    
      str1[couj]=str2[coui];  
      couj++;  
  }  		
   str1[couj]='\0';
    	strncpy(i_word.letter,str1,sizeof(str1)); 	
     
    idi++;	  
  
 s=s.substr(coui);   
   /*if(s.length() >=coui+4)
  {
    
   }
      else break;*/
	   }
   	    		   
		   else{
		   	string str3=s;
		   	int counts=-1;
		   	if(s.length() <=4)
		   	   break;
		   	   else{
		   	   	s=s.substr(1); 
				
				 if(s[0]>=97 && s[0]<=122 && s[1]>=97 && s[1]<=122 && s[2]>=97 && s[2]<=122 && s[3]>=97 && s[3]<=122)
				 ;	  	
		   	   	else while((s[0]>=97 && s[0]<=122 ) || (s[0]>=48 &&s[0]<=57) )
						  {
						  	s=s.substr(1);
							  }	
							 
		   	   	
				  }
		   	
							  
		   }
   }

}
		
	}
	
		return words;
}




void words_top10()
{
	fp1=fopen("WordCount.txt","r+");
	int characters=0,words=0,lines=0,count=0,num,flag,repeatnum,idi=0;
	    char str[100];
	    int coui,couj,couz;

     	while(!feof(fp1))
	{
		str[0]='0';
		 fscanf(fp1,"%s",str);
		 if(str=="\0") break;
		flag=0;
	characters+=strlen(str);
	
	for(int i=0;i<strlen(str)-1;i++)
	{
		if(str[i]>=65 && str[i]<=90)
		    {
		    	 str[i]+=32;
			}
	}
	
	if(str[0]>=97 && str[0]<=122 && str[1]>=97 && str[1]<=122 && str[2]>=97 && str[2]<=122 && str[3]>=97 && str[3]<=122)
     {       words++;
     			 word i_word;
     	
     	i_word.id =idi;
     	
     	char str1[100];
     	
     	  for( coui=0,couj=0;(str[coui]>=97 && str[coui]<=122 ) || (str[coui]>=48 && str[coui]<=57 );coui++)  
  {    
    
      str1[couj]=str[coui];  
      couj++;  
  
  }  		
   str1[couj]='\0';
   
   /////////////////////////////	
     	strncpy(i_word.letter,str1,sizeof(str1));
     	
     	set<word, compare>::iterator itr;
     	for(itr=wordin.begin() ;itr!=wordin.end() ;itr++)
     	{   
     		if(stricmp(str1,itr->letter)==0)
     		    { 
     		         
				     flag=1;
     		    	i_word.num=itr->num+1;
     		    	wordin.erase(itr);
					 break; 
				 }
     		
		 }
		
		if(flag==1)
		{
			wordin.insert(i_word); 
				}		
	if(flag==0){
		 i_word.num=1;
		 wordin.insert(i_word);	
	} 
     	
     	idi++;	 
	 
   string s,s1;
   s=str;
   s=s.substr(coui);

   
   
 while(s.length() >=4)
   {
   	  int coui,couj; 
     string str2=s;
	 if(str2[0]>=97 && str2[0]<=122 && str2[1]>=97 && str2[1]<=122 && str2[2]>=97 && str2[2]<=122 && str2[3]>=97 && str2[3]<=122)   
   	{
   		words++;
   			 word i_word;
     	
     	i_word.id =idi;
     	
     	char str1[100];
     	  for( coui=0,couj=0;(str2[coui]>=97 && str2[coui]<=122 ) || (str2[coui]>=48 && str2[coui]<=57 );coui++)  
  {    
      str1[couj]=str2[coui];  
      couj++;  
  }  		
   str1[couj]='\0';
    	strncpy(i_word.letter,str1,sizeof(str1)); 	
     	set<word, compare>::iterator itr;
     	for(itr=wordin.begin() ;itr!=wordin.end() ;itr++)
     	{   
     		if(stricmp(str1,itr->letter)==0)
     		    {    
				     flag=1;
     		    	i_word.num=itr->num+1;
     		    	wordin.erase(itr);
					 break; 
				 }
     		
		 }
		
		if(flag==1)
		{
			wordin.insert(i_word); 
				}	
	else{
		 i_word.num=1;
		 wordin.insert(i_word);	
	} 
     	
    idi++;	  
  
 s=s.substr(coui);   
   /*if(s.length() >=coui+4)
  {
    
   }
      else break;*/
	   }
   	    		   
		   else{
		   	string str3=s;
		   	int counts=-1;
		   	if(s.length() <=4)
		   	   break;
		   	   else{
		   	   	s=s.substr(1); 
				
				 if(s[0]>=97 && s[0]<=122 && s[1]>=97 && s[1]<=122 && s[2]>=97 && s[2]<=122 && s[3]>=97 && s[3]<=122)
				 ;	  	
		   	   	else while((s[0]>=97 && s[0]<=122 ) || (s[0]>=48 &&s[0]<=57) )
						  {
						  	s=s.substr(1);
							  }	
							 
		   	   	
				  }
		   	
							  
		   }
   }

}
		
	}
	
	
	
	
		 int i=0;
		  word i_word;
	set<word, compare>::iterator itr;
     	for( itr=wordin.begin() ;itr!=wordin.end() ;itr++)
     	{
     		i_word.id =itr->id;
     		strncpy(i_word.letter,itr->letter,sizeof(i_word.letter));
     		i_word.num=itr->num;
     	     	wordnum.insert(i_word); 
		 }
		 
		 
		 
		 
		 set<word, comparenum>::iterator itrl;
     	for(itrl=wordnum.begin() ;itrl!=wordnum.end() ;itrl++,i++)
     	{
               idnum[i]=itrl->id;
               //cout<<itrl->id<<endl;
               
               cout<<itrl->letter<<":"<<itrl->num<<endl;
              
               if(i==9) break;
		 }


	
}
	
	



int  main()
{
	double t = clock();
		int lines,words,characters;
		characters=characters_get();
		cout<<"characters:"<<characters<<endl;
	lines=get_lines();
	cout<<"lines:"<<lines<<endl; 
	words=words_count();
	cout<<"words:"<<words<<endl;
		words_top10();
		cout<<"< elapsed time: "<<(clock()-t)/CLOCKS_PER_SEC<<" >"<<endl;
		return 0;
	
}
